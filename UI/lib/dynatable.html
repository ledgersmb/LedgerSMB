<?lsmb BLOCK dynatable ?>
<table id="<?lsmb attributes.id ?>" class="<?lsmb attributes.class ?>">
<?lsmb- IF !hide_header -?>
<thead>
   <tr>
   <?lsmb- FOREACH COL IN columns -?>
   <th class="<?lsmb COL.col_id _ ' ' _ COL.class _ ' ' _ COL.type ?>">
       <?lsmb COL.name ?>
   </th>
   <?lsmb- END -?>
   </tr>
</thead>
<?lsmb- END -?>
<tbody>
   <?lsmb- FOREACH ROW IN tbody.rows -?>
   <tr class="<?lsmb ROW.html_class ?>">
      <?lsmb- FOREACH COL IN columns -?>
      <td class="<?lsmb COL.col_id _ ' ' _ COL.class _ ' ' _ COL.type ?>">
          <?lsmb- IF COL.type == 'input_text' -?>
          <input id="<?lsmb COL.col_id ?>-<?lsmb loop.count ?>"
               type="text"
              class="<?lsmb COL.class ?>"
               name="<?lsmb COL.col_id ?>_<?lsmb loop.count ?>"
              value="<?lsmb ROW.${COL.col_id} ?>"
         />
         <?lsmb- ELSIF COL.type == 'checkbox';
                   IF ROW.${COL.name};
                      CHECKED = "checked='CHECKED'";
                   ELSE; 
                      CHECKED = '';
                   END;
                   ?> 
         <input id="<?lsmb COL.col_id ?>-<?lsmb loop.count ?>"
               type="checkbox"
               name="<?lsmb COL.col_id ?>_<?lsmb loop.count ?>"
              class="<?lsmb COL.class ?>"
              value="<?lsmb ROW.row_id ?>"
               <?lsmb CHECKED ?> />
         <?lsmb- ELSIF COL.type == 'radio' ?> 
         <input id="<?lsmb COL.col_id ?>-<?lsmb loop.count ?>"
               type="radio"
               name="<?lsmb COL.col_id ?>"
              class="<?lsmb COL.class ?>"
              value="<?lsmb ROW.row_id ?>"
               <?lsmb CHECKED ?> />
         <?lsmb- ELSIF COL.type == 'href'; 
                   HREF_SFX = COL.col_id _ "_href_suffix";
                   IF row.$HREF_SFX;
                      HREF = COL.href_base _ ROW.$HREF_SFX;
                   ELSE;
                      HREF = COL.href_base _ ROW.row_id;
                   END
          ?><a href="<?lsmb HREF ?>"><?lsmb ROW.${COL.col_id} ?></a>
         <?lsmb- ELSE -?>
            <?lsmb ROW.${COL.col_id} ?>
         <?lsmb- END -?>
      </td>
      <?lsmb- COUNT = loop.count -?>
      <?lsmb- END -?>
   </tr>
   <?lsmb- END ?>
</tbody>
<?lsmb- IF tfoot -?>
<tfoot>
   <?lsmb- FOREACH ROW IN tfoot.rows -?>
   <tr>
     <?lsmb- FOREACH COL IN columns;
     IF tfoot.coltypes.${COL.col_id} == 'spacer';
        SPACECOUNT = SPACECOUNT + 1;
     ELSE;
       IF SPACECOUNT > 0 ?>
          <td colspan="<?lsmb SPACECOUNT ?>">&nbsp;</td>
       <?lsmb END ?>
     <td class="<?lsmb COL.col_id ?>">
       <?lsmb IF tfoot.coltypes.${COL.col_id};
             TYPE = tfoot.coltypes.${COL.col_id};
          ELSE; 
             TYPE = COL.type;
          END;
          IF TYPE == 'input_text' -?>
          <input id="<?lsmb COL.col_id ?>-<?lsmb loop.count ?>"
               type="text"
              class="<?lsmb COL.class ?>"
               name="<?lsmb COL.col_id ?>_<?lsmb loop.count ?>"
              value="<?lsmb ROW.${COL.col_id} ?>"
         />
         <?lsmb- ELSIF TYPE == 'checkbox';
                   IF ROW.${COL.name};
                      CHECKED = "checked='CHECKED'";
                   ELSE; 
                      CHECKED = '';
                   END;
                   ?> 
         <input id="<?lsmb COL.col_id ?>-<?lsmb loop.count ?>"
               type="checkbox"
               name="<?lsmb COL.col_id ?>_<?lsmb loop.count ?>"
              class="<?lsmb COL.class ?>"
              value="<?lsmb ROW.row_id ?>"
               <?lsmb CHECKED ?> />
         <?lsmb- ELSIF TYPE == 'radio' ?> 
         <input id="<?lsmb COL.col_id ?>-<?lsmb loop.count ?>"
               type="radio"
               name="<?lsmb COL.col_id ?>"
              class="<?lsmb COL.class ?>"
              value="<?lsmb ROW.row_id ?>"
               <?lsmb CHECKED ?> />
         <?lsmb- ELSIF TYPE == 'href'; 
                   HREF_SFX = COL.col_id _ "_href_suffix";
                   IF row.$HREF_SFX;
                      HREF = COL.href_base _ ROW.$HREF_SFX;
                   ELSE;
                      HREF = COL.href_base _ ROW.row_id;
                   END
          ?><a href="<?lsmb HREF ?>"><?lsmb ROW.${COL.col_id} ?></a>
                   IF row.${COL.col_id}_href_suffix;
                      HREF = COL.href_base _ ROW.${COL.col_id}_href_suffix;
                   ELSE;
                      HREF = COL.href_base _ ROW.row_id;
                   END
          ?><a href="<?lsmb HREF ?>"><?lsmb ROW.${COL.col_id} ?></a>
         <?lsmb- ELSE -?>
            <?lsmb ROW.${COL.col_id} ?>
         <?lsmb- END -?>
     </td>
     <?lsmb- END #if -?>
     <?lsmb- END -?>
   </tr>
   <?lsmb- END -?>
</tfoot>
<?lsmb- END -?>
</table>
<?lsmb END #block ?>
