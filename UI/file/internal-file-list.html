[% PROCESS 'elements.html' %]
[% PROCESS 'dynatable.html' %]
<body>
  <form id="system-files"
        method="post"
        action="file.pl"
        enctype="multipart/form-data"
        data-dojo-type="lsmb/Form">
    <h1 class="listtop">Uploaded files (not attached)</h1>

    [% PROCESS dynatable tbody = { rows = files }
           %]

    [% INCLUDE input element_data = {
           type = "hidden"
           value = "6"
           name = "file_class"
           } %]
    [% INCLUDE input element_data = {
           type = "hidden"
           value = "0"
           name = "ref_key"
           } %]
    [% INCLUDE input element_data = {
           type = "hidden"
           value = "file.pl?__action=list_internal_files"
           name = "callback"
           } %]

    [% INCLUDE button element_data = {
           text = text("Delete")
           'data-lsmb-doing' = text('Deleting...')
           'data-lsmb-done' = text('Deleted')
           value = "delete_internal_files"
           name = "__action"
           type = "submit"
           class = "submit"
           } %]

    <div class="inputline">
      <div class="inputgroup">
        [% INCLUDE input element_data = {
               label = text('Description')
               type = "text"
               value = description
               name = "description"
               class = "description"
               } %]
      </div>
    </div>
    <div class="inputline">
      <div class="inputgroup">
        [% INCLUDE input element_data = {
               label = text('Url')
               type = "text"
               value = url
               name = "url"
               class = "url"
               } %]
      </div>
    </div>
    <div class="separator"></div>
    [% text('Or') %]
    <div class="inputline">
      <div class="inputgroup">
        [% INCLUDE input element_data = {
               label = text("File")
               type = "file"
               name = "upload_data"
               } %]
      </div>
    </div>
    <div class="inputline">
      <div class="inputgroup">
        [% INCLUDE button element_data = {
               text = text('Upload')
               'data-lsmb-doing' = text('Uploading...')
               'data-lsmb-done' = text('Uploaded')
               value = "attach_file"
               name = "__action"
               type = "submit"
               class = "submit"
               } %]
      </div>
    </div>
  </form>
</body>
