Installing LedgerSMB 1.2 


This document contains information on how to install LedgerSMB.  We recommend
that the reader start by reading the section on manual installation and then
start by trying the automated means mentioned later.

Also this document assumes that the reader is already familiar with the release
notes.  If you have not already done so, please read the release_notes file in
the doc/ directory.

MANUAL INSTALL:
===============================================================================

1)  Untar in desired location.

2)  Decide where to put the user/session management tables.  In general, we
recommend as follows:
  a)  Single dataset installations should use the user tables in the dataset.
  b)  Multicompany installations should use user tables in a separate dataset
      from any accounting data.

3)  Create central database

  a) cd to the sql/ directory of the new ledger directory.
  b) run "psql" with appropriate options to connect to your database.
  c) Run the SQL script Pg-central.sql.
  d) If you are going to put your data here too, run the following command:
	CREATE LANGUAGE PLPGSQL;

  Note that the psql connection should use the same username that you intend to
  use for the user authentication connection.  If you use a different username
  you may find that you get an Access Denied message.

4)  Set the admin password:
  a)  From psql, determine what admin password you wish to use.  Then type:
      "update users_conf set password = md5('my_password');"
      Naturally you would use your password instead of my_password.


5)  Edit the ledger-smb.conf file as appropriate.
Congratulations, you have manually installed LedgerSMB 1.2.

6)  Check Dependencies

The Build.PL script can be used to test for unmet dependencies and run other
tests.  It doesn't install anything yet, but it will tell you what you are 
missing.  To check for dependencies, run "perl Build.PL" from the command line.
Missing dependencies can generally be installed via a Linux distributor's
package manager or by CPAN. (Build.PL itself uses Module::Build, which is
available in packages like perl-Module-Build or libmodule-build-perl.)

Once this is done and dependencies are satisfied, you can check to see whether
the installation nominally works by running "./Build test" from the command
line.  The test suites currently check to make sure all the perl modules load
and that a number of numeric tests are passed.

Dependencies which are recommended are needed only for specific functionality
and may not be required in all circumstances.  These include:
  * Net::TCLink for credit card processing in a POS environment
  * Parse::RecDescent for the CLI script host



TROUBLESHOOTING
===========================================================================
Error:  Access Denied in admin.pl

Likely causes:
1)  The password entered may not match the password set in step 4.  You can 
    repreat that step prior to the creation of user accounts as often as you 
    wish.

    After the creation of user accounts, the commant to reset the admin password
    is:
    UPDATE users_conf SET password=mp5('password') WHERE id = 
        (select id FROM user WHERE username = 'admin');

    Of course, substitute 'password' for your chosen password.

2)  The central database may have been created with a different user than you 
    are using for the connection and you may not have permission to access the
    required database entities.  To correct this, assuming that the desired 
    database username is ledgersmb, the following commands from psql:
      GRANT ALL ON users TO ledgersmb;
      GRANT ALL ON users_id_seq TO ledgersmb;
      GRANT ALL ON users_conf TO ledgersmb;
      GRANT ALL ON session TO ledgersmb;
      GRANT ALL ON session_session_id_seq TO ledgersmb;
